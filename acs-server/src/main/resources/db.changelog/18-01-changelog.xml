<?xml version="1.0" encoding="UTF-8"?>
<databaseChangeLog
        xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog
                      http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-4.29.xsd"
        objectQuotingStrategy="QUOTE_ONLY_RESERVED_WORDS">
    <changeSet id="1747598115368-1" author="PC">
        <createTable tableName="acs_grants">
            <column name="accessor_id" type="VARCHAR(128)">
                <constraints nullable="false" primaryKey="true" primaryKeyName="pk_acs_grants"/>
            </column>
            <column name="accessor_subject_type_id" type="VARCHAR(128)">
                <constraints nullable="false" primaryKey="true" primaryKeyName="pk_acs_grants"/>
            </column>
            <column name="accessed_id" type="VARCHAR(128)">
                <constraints nullable="false" primaryKey="true" primaryKeyName="pk_acs_grants"/>
            </column>
            <column name="accessed_subject_type_id" type="VARCHAR(128)">
                <constraints nullable="false" primaryKey="true" primaryKeyName="pk_acs_grants"/>
            </column>
            <column name="node_value" type="VARCHAR(255)">
                <constraints nullable="false" primaryKey="true" primaryKeyName="pk_acs_grants"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet id="1747598115368-2" author="PC">
        <createTable tableName="acs_nodes">
            <column name="value" type="VARCHAR(255)">
                <constraints nullable="false" primaryKey="true" primaryKeyName="pk_acs_nodes"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet id="1747598115368-3" author="PC">
        <createTable tableName="acs_subject_types">
            <column name="id" type="VARCHAR(128)">
                <constraints nullable="false" primaryKey="true" primaryKeyName="pk_acs_subject_types"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet id="1747598115368-4" author="PC">
        <createTable tableName="acs_subject_types_nodes">
            <column name="node_value" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
            <column name="subject_type_id" type="VARCHAR(128)">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet id="1747598115368-5" author="PC">
        <createTable tableName="acs_subjects">
            <column name="id" type="VARCHAR(128)">
                <constraints nullable="false" primaryKey="true" primaryKeyName="pk_acs_subjects"/>
            </column>
            <column name="subject_type_id" type="VARCHAR(128)">
                <constraints nullable="false" primaryKey="true" primaryKeyName="pk_acs_subjects"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet id="1747598115368-6" author="PC">
        <addForeignKeyConstraint baseColumnNames="accessor_id,accessor_subject_type_id" baseTableName="acs_grants"
                                 constraintName="FK_ACS_GRANTS_ON_ACIDACSUTYID"
                                 referencedColumnNames="id,subject_type_id" referencedTableName="acs_subjects"/>
    </changeSet>
    <changeSet id="1747598115368-7" author="PC">
        <addForeignKeyConstraint baseColumnNames="accessed_id,accessed_subject_type_id" baseTableName="acs_grants"
                                 constraintName="FK_ACS_GRANTS_ON_ACIDACSUTYID0Utp62"
                                 referencedColumnNames="id,subject_type_id" referencedTableName="acs_subjects"/>
    </changeSet>
    <changeSet id="1747598115368-8" author="PC">
        <addForeignKeyConstraint baseColumnNames="node_value" baseTableName="acs_grants"
                                 constraintName="FK_ACS_GRANTS_ON_NODE_VALUE" referencedColumnNames="value"
                                 referencedTableName="acs_nodes"/>
    </changeSet>
    <changeSet id="1747598115368-9" author="PC">
        <addForeignKeyConstraint baseColumnNames="subject_type_id" baseTableName="acs_subjects"
                                 constraintName="FK_ACS_SUBJECTS_ON_SUBJECT_TYPE" referencedColumnNames="id"
                                 referencedTableName="acs_subject_types"/>
    </changeSet>
    <changeSet id="1747598115368-10" author="PC">
        <addForeignKeyConstraint baseColumnNames="node_value" baseTableName="acs_subject_types_nodes"
                                 constraintName="fk_acssubtypnod_on_node_entity" referencedColumnNames="value"
                                 referencedTableName="acs_nodes"/>
    </changeSet>
    <changeSet id="1747598115368-11" author="PC">
        <addForeignKeyConstraint baseColumnNames="subject_type_id" baseTableName="acs_subject_types_nodes"
                                 constraintName="fk_acssubtypnod_on_subject_type_entity" referencedColumnNames="id"
                                 referencedTableName="acs_subject_types"/>
    </changeSet>
    <include file="db.changelog/26-01-changelog.xml"/>

</databaseChangeLog>